- @title = "Personal Hiscores" 
= link_to image_tag("f2pwiki_500.png"), players_path

%p#notice= notice

= content_tag(:div, nil, class: "container", style: "width: 820px;") do 
  = content_tag(:div, nil, class: ["bar", "ranks"]) do
    = link_to "Hiscores", ranks_path
  = content_tag(:div, nil, class: ["bar", "ehp"]) do 
    = link_to "EHP Rates", ehp_path
  = content_tag(:div, nil, class: ["bar", "calcs"]) do 
    = content_tag(:div, nil, class: ["container", "calcs"], style: "margin-bottom: 0px; padding: 0px;", id: "calcs") do 
      = "Calculators"
    = content_tag(:div, nil, class: ["dropdown", "container"], id: "calcs-list", remote: true) do
      = link_to "Melee DPS", meleedps_path, remote: true
      = link_to "Ranged DPS", rangeddps_path, remote: true
      = link_to "Magic DPS", magicdps_path, remote: true
      = link_to "Combat Lvl", combat_path, remote: true
      = link_to "GP/XP, Alch", gpxp_path, remote: true
  = content_tag(:div, nil, class: ["bar", "fake"]) do 
    = link_to "Hall of Shame", fake_path
  = content_tag(:div, nil, class: ["bar", "links"]) do 
    = link_to "Links", links_path
  = content_tag(:div, nil, class: ["bar", "changelog"]) do 
    = link_to "Changelog", changelog_path
  = content_tag(:div, nil, class: ["bar", "donate"]) do 
    = link_to "About Us/Donate", donate_path


= content_tag(:div, nil, class: "container", style: "width: 820px;") do 
  = content_tag(:div, nil, class: ["container", "left"], style: "width: 320px;") do 
    - if @player.player_name == "Obor"
      = image_tag "flairs/obor.png"
    - elsif @player.player_name == "Bargan"
      = image_tag "flairs/bargan_large2.png"
    - elsif @player.player_name == "nagraB"
      = image_tag "flairs/nagrab_large2.png"
    - elsif @player.player_name == "Scincoidea"
      = image_tag "flairs/scin.png"
    - elsif @player.player_name == "UncleTomas"
      = content_tag(:div, nil, style: "margin: auto; padding: 15px; width: 180px; height: 40px;") do 
        %h5 Gone but never forgotten
        %h5 
          = link_to "RIP Unkie", "https://i.imgur.com/EE28q9w.png"
      = image_tag "flairs/tyrone.png"
    - elsif @player.player_name == "FitMC"
      = content_tag(:div, nil, style: "margin: auto; padding: 20px; width: 200px; height: 40px;") do 
        %h5 Definitely an OSRS player and not a Minecraft YouTuber.
        
  = content_tag(:div, nil, class: ["container", "left"], style: "margin: auto; width: 300px;") do 
    = content_tag(:div, nil, class: "container", id: "headerHiscores", style: "margin: auto; width: 300px; height: 28px; margin-bottom: 0px;") 
    = content_tag(:table, nil, style: "text-align: center; margin: auto; min-width: 300px; padding: 5px; margin-bottom: 0px;") do 
      %thead
        %th{:colspan => 5}
          = "Personal scores for "
          - if @player.player_acc_type == "Reg"
            = " (Reg)"
          - else
            = image_tag "#{@player.player_acc_type}.png", style: "vertical-align: -6px;"
          = " #{@player.player_name}"
      %thead
        %th{:align => "center"}  
        %th{:align => "center"}  XP
        %th{:align => "center"}  Level
        %th{:align => "center"}  EHP
        %th{:align => "center"}  Rank
      %tbody
        %tr
          %th= image_tag "skills/overall.png"
          %td= number_with_delimiter(@player["overall_xp"].to_i, :delimiter => ",") 
          %td= @player["overall_lvl"]
          %td= number_with_delimiter(@player["overall_ehp"].to_f, :delimiter => ",", :separator => ".") 
          %td= number_with_delimiter(@player["overall_rank"].to_i, :delimiter => ",") 
        - F2POSRSRanks::Application.config.f2p_skills.each do |skill|
          %tr
            %th= image_tag "skills/#{skill}.png"
            %td= number_with_delimiter(@player["#{skill}_xp"].to_i, :delimiter => ",") 
            %td= @player["#{skill}_lvl"]
            %td= number_with_delimiter(@player["#{skill}_ehp"].to_f, :delimiter => ",", :separator => ".") 
            %td= number_with_delimiter(@player["#{skill}_rank"].to_i, :delimiter => ",") 
    = content_tag(:div, nil, class: "container", id: "footerHiscores", style: "margin:auto; width: 300px; height:28px; margin-top: 0px;") 
  = content_tag(:div, nil, class: ["container", "left", "search"], style: "margin-left: 20px; margin-bottom: 10px; width: 152px; height: 98px; padding-top: 0px;") do 
    %h4 Update Stats
    = form_tag players_path(@player), :method => :put do
      = link_to "#{@player.player_name}", @player, method: :update_player
      
  = content_tag(:div, nil, class: ["container", "left", "search"], style: "margin-left: 20px; margin-bottom: 5px; width: 152px; height: 98px;") do 
    = "Other Hiscores"
    %br
    - if @player.player_acc_type == "HCIM"
      = link_to "OSRS Hiscores", "http://services.runescape.com/m=hiscore_oldschool_hardcore_ironman/hiscorepersonal.ws?user1=#{@player.player_name}"
    - elsif @player.player_acc_type == "UIM"
      = link_to "OSRS Hiscores", "http://services.runescape.com/m=hiscore_oldschool_ultimate/hiscorepersonal.ws?user1=#{@player.player_name}"
    - elsif @player.player_acc_type == "IM"
      = link_to "OSRS Hiscores", "http://services.runescape.com/m=hiscore_oldschool_ironman/hiscorepersonal.ws?user1=#{@player.player_name}"
    - elsif @player.player_acc_type == "Reg"
      = link_to "OSRS Hiscores", "http://services.runescape.com/m=hiscore_oldschool/hiscorepersonal.ws?user1=#{@player.player_name}"
    %br
    = link_to "Crystal Math Labs", "http://crystalmathlabs.com/tracker/track.php?player=#{@player.player_name}"
      
  = content_tag(:div, nil, class: ["container", "left", "search"], style: "margin-left: 20px; margin-bottom: 5px; width: 152px; height: 98px;") do 
    = form_tag ranks_path, :method => "get", id: "search-players-form" do
      = "Search by name"
      %br
      = text_field_tag :search, params[:search], placeholder: "", :class => "search-field", style: "width: 100px;"
      %br
      = submit_tag "Search"
      
  = content_tag(:div, nil, class: ["container", "left", "filter"], style: "margin-left: 20px; margin-bottom: 5px; width: 152px; height: 126px;") do 
    = form_tag compare_path, :method => :get, :id => 'filters_form' do
      = "Compare Users"
      %br
      = text_field_tag :player1, params[:player1], placeholder: "", :class => "search-field", style: "width: 100px;"
      %br
      = text_field_tag :player2, params[:player2], placeholder: "", :class => "search-field", style: "width: 100px;"
      %br
      = submit_tag 'Compare', :id => "compare_submit"